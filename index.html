<!DOCTYPE html>
<html lang="fr">
<!-- 
    ============================================
       Developed by : https://github.com/berru-g/
       Date : 20/01/2025
       Copyright (c) 2025 Berru
    ============================================
-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Earth</title>
    <link rel="shortcut icon" href="./img/logo.png" />
    <link rel="apple-touch-icon" href="./img/logo.png" />
    <meta name="description"
        content="Achetez un pixel sur notre carte du monde num√©rique pour 1‚Ç¨ seulement ! Personnalisez-le avec une couleur, une image et un lien vers votre site. Devenez propri√©taire d'un bout de terre digitale unique." />
    <meta name="keywords"
        content="acheter pixel, carte monde pixel, pixel √† 1‚Ç¨, terre num√©rique, publicit√© pixel, acheter espace digital, pixel personnalisable, investissement pixel, carte interactive, pixel art monde, lien pixel, image pixel, propri√©taire pixel, projet viral, cryptoterre, NFT pixel, g√©olocalisation pixel" />
    <meta name="author" content="Gael Berru.">
    <meta name="robots" content="noai">
    <!-- Open Graph / Facebook (pour les partages sociaux) -->
    <meta property="og:title" content="Pixel Map ‚Äì 1‚Ç¨ par pixel | Poss√©dez un bout du monde num√©rique" />
    <meta property="og:description"
        content="Achetez et personnalisez votre pixel sur notre carte interactive. 100 000 pixels disponibles !" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://pixelearth.netlify.app" />
    <meta property="og:image" content="https://pixelearth.netlify.app/preview.jpg" /> <!-- Image 1200x630px -->
    <meta property="og:site_name" content="Pixel Map" />
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Pixel Map ‚Äì 1‚Ç¨ par pixel" />
    <meta name="twitter:description"
        content="Poss√©dez et personnalisez un pixel unique sur notre carte du monde digitale !" />
    <meta name="twitter:image" content="https://pixelearth.netlify.app/preview.jpg" />

    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Product",
  "name": "Pixel Map - Achat de pixel num√©rique",
  "description": "Carte interactive o√π chaque pixel est vendu 1‚Ç¨. Personnalisez-le avec une couleur, une image et un lien vers votre entreprise.",
  "brand": {
    "@type": "Brand",
    "name": "Pixel Map"
  },
  "offers": {
    "@type": "Offer",
    "url": "https://pixelearth.netlify.app",
    "priceCurrency": "EUR",
    "price": "1.00",
    "availability": "https://schema.org/InStock",
    "itemCondition": "https://schema.org/NewCondition"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.9",
    "reviewCount": "150"
  }
}
</script>
    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "Pixel Map",
  "url": "https://pixelearth.netlify.app",
  "applicationCategory": "BusinessApplication",
  "operatingSystem": "Web Browser",
  "screenshot": "https://pixelearth.netlify.app/screenshot.jpg"
}
</script>
    <!-- Google tag (gtag.js) -->
</head>
<script>
        // Popup d√©clench√©e au chargement de la page
        document.addEventListener('DOMContentLoaded', () => {
            Swal.fire({
                title: 'üåç Pixel Map - Votre espace dans le monde num√©rique',
                html: `<p>Pixel Map est une carte num√©rique o√π vous pouvez <strong>acheter un pixel pour 1‚Ç¨</strong>, le personnaliser avec une <strong>couleur, une image et un lien</strong>, et devenir <strong>propri√©taire d'un espace unique</strong> dans ce monde virtuel collaboratif.</p>`,
                icon: 'info',
                background: '#1a1a2e',  
                color: '#f4f4f4',        
                confirmButtonText: 'Explorer la carte',
                confirmButtonColor: '#ff6b6b',  
                showCloseButton: true,
                imageUrl: 'https://i.imgur.com/XYGJzJl.png',  
                imageAlt: 'Carte Pixel Map',
                footer: '<a href="/faq">Comment √ßa marche ?</a>'
            });
        });
    </script>

<body>
    <h1>Pixel Map 1$ = pixel</h1>
    <div id="auth">
        <input type="email" id="email" placeholder="Sign up to buy a pixel">
        <button onclick="login()">Connexion</button>
    </div>
    <div id="grid"></div>
    <div id="pixel-form" style="display:none; margin-top:20px;">
        <h2>Personnalise ton pixel</h2>
        <form id="customForm">
            <label>Url link : <input type="text" id="linkUrl" /></label><br />
            <label>Picture URL : <input type="text" id="imageUrl" /></label><br />
            <label>Color : <input type="color" id="color" value="#ff0000" /></label><br /><br />
            <button type="submit">Buy the pixel for 1‚Ç¨</button>
        </form>
    </div>


    <script type="module">
        import { createClient } from 'https://esm.sh/@supabase/supabase-js'

        const supabaseUrl = 'https://szqwzslmaglrignthtfj.supabase.co'
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN6cXd6c2xtYWdscmlnbnRodGZqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg1MzgxMjEsImV4cCI6MjA2NDExNDEyMX0.gHTwZFfI_vXzA0i6Di1btqV_ojOv8vcMJTzAuW_A6pI'
        const supabase = createClient(supabaseUrl, supabaseKey)

        let user = null

        window.login = async () => {
            const email = document.getElementById('email').value
            const { error } = await supabase.auth.signInWithOtp({ email })
            if (error) return alert('Erreur: ' + error.message)
            alert('Check ton email pour te connecter.')
        }

        const session = await supabase.auth.getSession()
        user = session?.data?.session?.user || null
        if (user) document.getElementById('auth').style.display = 'none'

        supabase.auth.onAuthStateChange((_event, session) => {
            user = session?.user
            if (user) document.getElementById('auth').style.display = 'none'
        })

        // Charger les pixels
        const grid = document.getElementById('grid')
        const pixels = new Array(1600).fill().map((_, i) => i)

        const { data, error } = await supabase.from('pixels').select('*')
        const soldMap = new Set(data?.filter(p => p.is_sold).map(p => p.id))

        pixels.forEach((id) => {
            const div = document.createElement('div')
            div.className = 'pixel'
            if (soldMap.has(id)) div.classList.add('sold')
            div.addEventListener('click', async () => {
                if (!user) return alert('Connecte-toi pour acheter.');
                if (div.classList.contains('sold')) return alert('D√©j√† vendu.');

                selectedPixelId = id;
                formContainer.style.display = 'block';
                window.scrollTo({ top: formContainer.offsetTop, behavior: 'smooth' });
            });

    </script>
    <script src="script.js"></script>
    <script src="supabase.js"></script>
</body>

</html>